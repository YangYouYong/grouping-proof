# Generated by Makefile. Do not edit.

2011-02-23 15:13  Romain Tartière <rtartiere@il4p.fr>

	* TAG libfreefare-0.3.1.

2011-02-23 15:12  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, configure.ac: libfreefare: Update for 0.3.1.

2011-02-23 15:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_crypto.c: libfreefare: R is const.

2011-02-13 14:26  Romain Tartière <rtartiere@il4p.fr>

	* test/Makefile.am, test/common/Makefile.am: libfreefare: Do not
	  systematically build the tests if cutter is installed.
	  
	  Building them only when running the test-suite is probably
	  enough.

2011-02-13 14:20  Romain Tartière <rtartiere@il4p.fr>

	* Makefile.am: libfreefare: Shorter is better.

2011-02-13 14:13  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/Makefile.am, libfreefare/freefare.h,
	  libfreefare/freefare_error.3, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c,
	  libfreefare/mifare_desfire_error.c, test/test_mifare_desfire.c:
	  libfreefare: Do not abort on crypto error.
	  
	  Because in some circumstances the crypto is skipped regardless of
	  the
	  communication settings by the Mifare DESFire (e.g. when reading a
	  file which is
	  writable with any key), do not abort if the crypto fail, and make
	  it possible
	  to the user to catch such an event to fix his code accordingly.
	  
	  Only display crypto diagnostic if compiled with debug support.

2011-02-13 12:52  Romain Tartière <rtartiere@il4p.fr>

	* Makefile.am: libfreefare: prevent myself from shooting in my own
	  foot.

2011-02-13 12:50  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/mifare_classic.c: libfreefare: Fix
	  mifare_classic_transfer() with some readers.

2011-01-01 15:27  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_crypto.c: libfreefare: Fix CRC
	  localisation code.
	  
	  New issue
	  Summary: Add regression tests for CRC location in encyphered data
	  files.
	  The CRC position location code in mifare_cryto_postprocess_data()
	  shall be
	  checked.
	  
	  new issue
	  Summary: Rework mifare_cryto_postprocess_data() CRC localisations
	  The function has two different implementation of the same
	  feature: locate a CRC
	  at the end of a decyphered stream and check it. The crc32 will
	  fail if the
	  last CRC byte is 0x80, and the crc16 code looks awful. A
	  refactoring would
	  make our life easier.

2011-01-01 12:46  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-info.c: libfreefare: Do not exit if the
	  master key settings are not readable.

2010-12-31 12:47  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Make
	  mifare_desfire_authenticate() a bit more magic.
	  
	  If the provided key is a 3K3DES key, authenticate in ISO mode. If
	  the key is
	  an AES one, authenticate in AES mode. This sugar should help
	  third party
	  applications to handle authentication in a more generic way.

2010-12-31 10:53  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Move away global
	  variables.

2010-12-29 22:18  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Fix create_file2().
	  
	  ECOPYPASTETOOFAST | EBADLUCKITSVALID: The argument
	  communication_settings is
	  not to be used to construct the parameters passed to the crypto
	  functions
	  mifare_cryto_preprocess_data() & mifare_cryto_postprocess_data(),
	  but only for
	  building the frame.

2010-12-29 22:05  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c, test/test_mifare_desfire_ev1_aes.c:
	  libfreefare: Fix write_data() return value when data is
	  enciphered.
	  
	  We only have to return the number of bytes of raw data which are
	  sent.

2010-12-29 21:44  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Fix usage of a
	  potentially reallocated memory area.

2010-12-28 11:42  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Fix parenthesis position.

2010-12-28 11:30  Romain Tartière <rtartiere@il4p.fr>

	* ., libfreefare/Makefile.am, libfreefare/freefare.c,
	  libfreefare/freefare.h, libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_crypto.c,
	  libfreefare/mifare_ultralight.c,
	  test/mifare_ultralight_fixture.c, test/test_mifare_ultralight.c:
	  libfreefare: Merge de libfreefare-ultralight branch into trunk
	  (Mifare UltraLightC support).

2010-12-26 15:46  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/Makefile.am, libfreefare/mifare_desfire.3:
	  libfreefare: Update man pages.

2010-12-25 09:46  Romain Tartière <rtartiere@il4p.fr>

	* examples, examples/mifare-desfire-ev1-configure-ats.c:
	  libfreefare: Set the default ATS instead of a custom one.
	  
	  This prevent some tools to work properly with a card afterthat.

2010-12-24 22:14  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c, libfreefare/freefare_internal.h:
	  libfreefare: Detect Mifare DESFire targets with more than one
	  historical character.

2010-12-24 22:08  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, examples/Makefile.am,
	  examples/mifare-desfire-ev1-configure-ats.c,
	  libfreefare/freefare.h, libfreefare/mifare_desfire.c:
	  libfreefare: New API function mifare_desfire_set_ats().

2010-12-24 22:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_crypto.c: libfreefare: Simplify
	  redundant code.

2010-12-24 21:10  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-ev1-configure-default-key.c: libfreefare:
	  Fix example.

2010-12-24 20:41  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, examples, examples/Makefile.am,
	  examples/mifare-desfire-ev1-configure-default-key.c,
	  libfreefare/freefare.h, libfreefare/mifare_desfire.c:
	  libfreefare: New API function mifare_desfire_set_default_key().

2010-12-24 20:39  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_des.c: libfreefare: Commit files
	  forgotten as part of r733.

2010-12-24 14:10  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c: libfreefare: Rename some
	  internal functions.
	  
	  A function with DES in its name that can perform AES crypto is
	  somewhat
	  disturbing.

2010-12-24 13:59  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire.c, test/test_mifare_desfire_ev1.c,
	  test/test_mifare_desfire_ev1_3des.c,
	  test/test_mifare_desfire_ev1_3k3des.c,
	  test/test_mifare_desfire_ev1_aes.c: libfreefare: Freshen out
	  cut_assert_success() macro.

2010-12-24 13:49  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_aes.c: libfreefare: Fix headers for
	  memset().

2010-12-24 13:34  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/Makefile.am, libfreefare/mifare_desfire.3,
	  libfreefare/mifare_desfire_key.3: libfreefare: Sync man pages.

2010-12-24 13:33  adiacre@il4p.fr

	* libfreefare/mifare_desfire_crypto.c,
	  test/test_mifare_desfire_aes.c,
	  test/test_mifare_desfire_ev1_3des.c,
	  test/test_mifare_desfire_ev1_3k3des.c,
	  test/test_mifare_desfire_ev1_aes.c: libfreefare: replace last
	  deprecated bzero function by memset.

2010-12-24 13:24  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/Makefile.am: libfreefare: Create forgotten man pages
	  symlinks.

2010-12-24 13:04  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c, test/Makefile.am,
	  test/test_mifare_desfire_ev1_3des.c: libfreefare: Add support for
	  ISO authentication with 3DES keys.

2010-12-24 12:58  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_des.c: libfrefare: Use local ivect in
	  test.
	  
	  It looks like finally a global variable modified by a test can
	  impact another
	  test.

2010-12-24 12:38  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_crypto.c: libfreefare: Change the
	  enciphered_data_length() internal function prototype.

2010-12-24 11:41  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c,
	  test/test_mifare_desfire_des.c: libfreefare: Change the
	  mifare_cbc_des() internal function prototype.

2010-12-23 18:05  Romain Tartière <rtartiere@il4p.fr>

	* NEWS: libfreefare: Update the NEWS file regarding the
	  mifare_desfire_get_file_settings() buffer overflow fixed in 0.2.3
	  (update versions).

2010-12-23 18:02  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac: libfreefare: Bump version for the 0.3.x series.

2010-12-18 13:33  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_ev1.c: libfreefare: Add missing
	  svn:keyword.

2010-12-18 13:32  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c, libfreefare/mad.c,
	  libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c: libfreefare: Reindent.

2010-12-18 03:11  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c,
	  test/test_mifare_desfire_des.c: libfreefare: Update the
	  MifareDirection structure for consistency.

2010-12-18 03:07  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_crypto.c,
	  test/test_mifare_desfire_des.c: libfreefare: Switch from obscure
	  'int mac' argument to 'MifareCryptoOperation operation'.

2010-12-18 02:50  Romain Tartière <rtartiere@il4p.fr>

	* TODO, libfreefare/Makefile.am,
	  libfreefare/mifare_desfire_authenticate.c,
	  libfreefare/mifare_desfire_crypto.c: libfreefare: Rename
	  mifare_desfire_authenticate.c to mifare_desfire_crypto.c.

2010-12-18 02:28  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.h, libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  libfreefare/mifare_desfire_key.c, test/Makefile.am, test/common,
	  test/common/mifare_desfire_auto_authenticate.c,
	  test/common/mifare_desfire_auto_authenticate.h,
	  test/test_mifare_desfire_ev1_3k3des.c: libfreefare: Add support
	  for authentication using 3K3DES.
	  
	  Please note that according to the NXP documentation of the Mifare
	  DESFire EV1,
	  the mifare_desfire_authenticate_iso() function can be used using
	  either 3DES or
	  3K3DES keys. The former has not been tested yet and is likely not
	  to work. To
	  word it differently, this is a 3K3DES crypto support, not a ISO
	  authentication
	  support...

2010-12-18 02:14  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_authenticate.c: libfreefare: Ignore
	  the status code when deciphering (3)DES data.

2010-12-18 02:07  Romain Tartière <rtartiere@il4p.fr>

	* HACKING, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Rewrite
	  some tests using switch statements.
	  
	  Add a note for the reason I do this in the HACKING file.

2010-12-18 01:52  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Improve
	  the way data with already a CRC is preprocessed.

2010-12-18 01:45  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_authenticate.c,
	  test/test_mifare_desfire_aes.c: libfreefare: Update CMAC code to
	  handle 64 and 128 bit keys.

2010-12-18 01:44  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_ev1_aes.c: libfreefare: Enlarge another
	  buffer to workaround the read_data() buffer overrun.

2010-12-18 01:32  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Invalidate
	  authentication when changing the currently used key.

2010-12-18 01:09  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Remove
	  weird code.
	  
	  I should quit coding drunk... or maybe start to...

2010-12-18 01:05  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c, test/test_mifare_desfire.c:
	  libfreefare: Workaround invalid write in read_data () (sic)
	  
	  This has to be improved to some extend in the near future (hence
	  the FIXME).

2010-12-17 22:53  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_authenticate.c,
	  test/test_mifare_desfire_des.c: libfreefare: Fix
	  key_macing_length() return value when nbytes is 0.

2010-12-17 22:47  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Silent down the
	  compiler.
	  
	  The create_application() function has iso_ parameters for
	  creating ISO
	  application but this mode is not available yet so the code is
	  unused which
	  annoys the compiler when told to be somewhat strict.

2010-12-17 22:45  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_ev1_aes.c: libfreefare: Fix the fix
	  introduced at r697.
	  
	  Yes, this type I typed 'make' before committing...

2010-12-17 22:38  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_ev1_aes.c: libfreefare: Fix freed memory
	  usage.

2010-12-15 13:40  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Fix a brunch of
	  potentially reallocated memory areas.

2010-12-15 13:34  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c, test/test_mifare_desfire_ev1_aes.c:
	  libfreefare: Fix mifare_desfire_get_key_version() when
	  authenticated with an AES key.

2010-12-15 13:19  Romain Tartière <rtartiere@il4p.fr>

	* examples/Makefile.am, libfreefare/freefare.h,
	  libfreefare/mifare_desfire.c: libfreefare: Enable the
	  mifare-desfire-ev1-configure-random-uid example.

2010-12-15 12:51  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Fix
	  mifare_desfire_free_mem().

2010-12-15 12:51  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-info.c: libfreefare: Display additional
	  Mifare DESFire EV1 information if applicable.

2010-12-15 12:43  Romain Tartière <rtartiere@il4p.fr>

	* ., NEWS, TODO, configure.ac, examples,
	  examples/mifare-desfire-ev1-configure-random-uid.c,
	  libfreefare/freefare.c, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  libfreefare/mifare_desfire_key.c, test/Makefile.am,
	  test/common/mifare_desfire_auto_authenticate.c,
	  test/common/mifare_desfire_auto_authenticate.h,
	  test/mifare_desfire_ev1_fixture.c,
	  test/mifare_desfire_ev1_fixture.h, test/test_mifare_desfire.c,
	  test/test_mifare_desfire_aes.c, test/test_mifare_desfire_ev1.c,
	  test/test_mifare_desfire_ev1_aes.c: libfreefare: Add support for
	  Mifare DESFire EV1 with AES encryption.

2010-12-13 10:56  adiacre@il4p.fr

	* libfreefare/mifare_desfire.c: libfreefare: fix buffer overflow.

2010-12-10 17:10  adiacre@il4p.fr

	* configure.ac, libfreefare/mad.c, libfreefare/mifare_classic.c,
	  libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  test/test_mifare_classic.c, test/test_mifare_desfire.c:
	  libfreefare: replace deprecated bzero function by memset.

2010-12-10 14:30  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/mifare_desfire.c: Discard authentication
	  information after deleting the currently selected application.

2010-11-24 00:09  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, configure.ac: Bump version to 0.2.2.

2010-11-24 00:07  Romain Tartière <rtartiere@il4p.fr>

	* test/common/Makefile.am: libfreefare: Don't build
	  libtestcommon.la if we are not using cutter.

2010-11-23 20:57  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac: libfreefare: Update configure.ac [0.2.1].

2010-11-23 20:56  Romain Tartière <rtartiere@il4p.fr>

	* NEWS: libfreefare: Update NEWS file.

2010-11-23 20:54  Romain Tartière <rtartiere@il4p.fr>

	* test/common/Makefile.am: libfreefare: Add missing svn:keywords.

2010-11-23 18:42  Romain Tartière <rtartiere@il4p.fr>

	* test/common, test/common/Makefile.am: libfreefare: Add forgotten
	  files.

2010-11-23 18:38  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac, test/Makefile.am, test/common,
	  test/common/mifare_desfire_auto_authenticate.c,
	  test/common/mifare_desfire_auto_authenticate.h,
	  test/mifare_desfire_auto_authenticate.c,
	  test/mifare_desfire_auto_authenticate.h,
	  test/test_mifare_desfire.c: libfreefare: Fix autotools fun.
	  
	  Tribute to Justice!

2010-11-23 01:15  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Reset session key in
	  mifare_desfire_select_application().
	  
	  For Mifare DESFire EV1 support, we need to know when the user has
	  called
	  mifare_desfire_select_application() after being authenticated and
	  before
	  authenticated again.

2010-11-21 00:32  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire.c: libfreefare: Use
	  mifare_desfire_auto_authenticate() for authentication.

2010-11-21 00:10  Romain Tartière <rtartiere@il4p.fr>

	* test/Makefile.am, test/mifare_desfire_auto_authenticate.c,
	  test/mifare_desfire_auto_authenticate.h,
	  test/test_mifare_desfire.c: libfreefare: Move master key
	  detection and authentication in a convenience library.
	  
	  The autohell hack sucks and should be fixed, but I was unable to
	  find the magic
	  trick to prevent automake from building broken libtool rules
	  which produce
	  warnings about portability :-/.

2010-11-20 22:39  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_authenticate.c: libfreefare: Don't
	  return directly if we just have a command code.
	  
	  Mifare DESFire EV1 with authentication with AES or 3K3DES keys
	  will require to
	  perform CMACing on each frame, even those with just a command. So
	  it does not
	  break anything as of today, but would be a problem later on.

2010-11-20 22:29  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Prepare
	  extension of communication settings.

2010-11-20 22:24  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_authenticate.c: libfreefare: Add some
	  shortcuts.

2010-11-20 14:19  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_authenticate.c: libfreefare: Change
	  some numbers with corresponding constants.

2010-11-20 14:10  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Add an
	  offset parameter to mifare_cryto_preprocess_data()
	  
	  Some cryptographic operations are performed on the whole data
	  frame and not
	  only the payload with Mifare DESFire EV1. The solution for now is
	  not perfect,
	  (one new macro wrapping another big macro) but makes the code a
	  bit easier to
	  read, and with the MIFARE_DESFIRE macro rewriting as a function
	  (at some point
	  in the future), the whole should be bearable :-)

2010-11-20 02:22  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Don't swap the status
	  byte in the received data.
	  
	  This have been done for consistency with other targets support,
	  but
	  cryptographic operations with Mifare DESFire EV1 tags would
	  require to swap
	  again this byte because MACing is performed on the following data
	  (in this
	  order):
	  - Plain data
	  - Status
	  - Padding

2010-11-20 01:58  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-info.c: libfreefare: Display master-key
	  version in mifare-desfire-info.

2010-10-29 18:58  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac, libfreefare/mifare_desfire.c: libfreefare: Rely on
	  RAND_bytes() instead of DES_random_key() to generate random
	  vectors.

2010-10-29 18:53  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Fix a regression
	  introduced at r643.

2010-10-29 13:10  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/freefare.c, libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire.c: libfreefare: Rework error reporting
	  infrastructure.

2010-10-29 13:02  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_des.c: libfreefare: Improve the
	  test_mifare_rol() test.

2010-10-29 13:01  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, examples/mifare-desfire-access.c, libfreefare/freefare.h,
	  test/test_mifare_desfire.c: libfreefare: Rename some macros for
	  consistency.

2010-10-29 12:47  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_key.c: libfreefare: Split session key
	  generation for DES / 3DES.

2010-10-29 12:44  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Make some
	  more buffer sizes dynamic.

2010-10-29 12:34  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire_authenticate.c: libfreefare: Add a
	  block_size parameter to mifare_des().

2010-10-29 12:22  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  test/test_mifare_desfire_des.c: libfreefare: Require the ivect to
	  be provided to mifare_cbc_des().
	  
	  - Store ivect in the struct mifare_desfire_tag;
	  - Reset it before and after authentication;
	  - Reset before each crypto operation (for now).

2010-10-29 12:07  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_authenticate.c: libfreefare: Change
	  xor8() to xor() to work with buffers of any length.

2010-10-29 12:01  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  test/test_mifare_desfire_des.c: libfreefare: Change rol8() to
	  rol() to work with buffers of any length.

2010-10-29 11:07  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac, libfreefare/mifare_desfire_authenticate.c:
	  libfreefare: s|append_iso14443a_crc|iso14443a_crc_append|.

2010-10-17 20:21  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/freefare.h, libfreefare/mifare_desfire_aid.3,
	  libfreefare/mifare_desfire_aid.c, test/test_mifare_desfire_aid.c:
	  (libfreefare) New API function mifare_desfire_aid_get_aid().

2010-10-17 19:32  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/freefare.h, libfreefare/freefare_error.3,
	  libfreefare/mifare_desfire_error.c, test/test_mifare_desfire.c:
	  (libfreefare) New API function mifare_desfire_last_picc_error().

2010-10-17 16:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: (libfreefare) Add more parenthesis to
	  shut the compiler down.

2010-10-15 12:58  romain.tartiere@gmail.com

	* libfreefare/freefare.c, libfreefare/mifare_classic.c,
	  libfreefare/mifare_desfire.c, libfreefare/mifare_ultralight.c:
	  (libfreefare) Fix build with recent libnfc API breakage.

2010-10-08 12:31  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Fix detection of targets
	  without ATS.

2010-10-08 11:46  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-write-ndef.c: libfreefare: Add missing
	  Id.

2010-10-08 11:45  Romain Tartière <rtartiere@il4p.fr>

	* Makefile.am: libfreefare: Fix $Id$ in make output.

2010-10-08 11:43  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_aid.c: libfreefare: Add missing file
	  header & Id.

2010-10-08 11:41  Romain Tartière <rtartiere@il4p.fr>

	* test/mifare_desfire_des.c: libfreefare: Remove unused file.
	  
	  The test in this file is already in test_mifare_desfire_des.c.

2010-10-08 11:34  Romain Tartière <rtartiere@il4p.fr>

	* test/mifare_classic_fixture.c, test/mifare_desfire_fixture.c,
	  test/mifare_ultralight_fixture.c: libfreefare: Include fixture.h
	  in fixture.c.

2010-10-01 19:32  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: Use the actual UID length to select
	  a target.
	  
	  Without it, the libfreefare cannot use 4-bytes-long random UIDs
	  of Mifare
	  DESFire EV1.

2010-10-01 18:13  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: Switch back to InDataExchange() for
	  Mifare DESFire cards.
	  
	  Wrapping all frames in ISO7816-4 ADPU workarounds the P3 (Lc) >
	  0xFA limitation
	  of the PN531.

2010-09-30 06:04  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-ev1-configure-random-uid.c: Reindent
	  after last commit.
	  
	  Also reindent a forgotten switch/case while here.

2010-09-30 06:03  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-ev1-configure-random-uid.c: Display old
	  UID in mifare-desfire-ev1-configure-random-uid.
	  
	  If a presenter Mifare DESFire has a random UID, display it's
	  original UID.

2010-09-30 06:02  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-format.c: Minor fixes for
	  mifare-desfire-format.
	  
	  - Free default_key;
	  - Really stop on error.

2010-09-30 05:11  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-ev1-configure-random-uid.c: Add an
	  example to configure MIFARE DESFire EV1 random UID.
	  
	  Don't connect it to the build yet because the corresponding code
	  in the library
	  has not been committed yet: I want to keep a track of
	  modifications I do in the
	  VCS.

2010-09-29 19:46  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: Compare only the 4 first bytes of ATS.
	  
	  The 5th byte of Mifare DESFire being a "historical character" and
	  being
	  user-tweakable for Mifare DESFire EV1, we should not use it when
	  comparing the
	  ATS with our Mifare DESFire reference ATS to determine if a given
	  tag is a
	  Mifare DESFire or not.

2010-09-28 19:01  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, examples/mifare-desfire-info.c, libfreefare/Makefile.am,
	  libfreefare/freefare.c, libfreefare/freefare.h,
	  libfreefare/freefare_error.3, libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire.3, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_error.3: Enhance error reporting.
	  
	  Now that the libnfc has error handling, report errors triggered
	  in the libnfc
	  and add support for errors triggered in libfreefare.

2010-09-28 17:33  Romain Tartière <rtartiere@il4p.fr>

	* NEWS: Update NEWS file.

2010-09-28 16:37  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c:
	  Implement ISO14443-4 block numbers.
	  
	  This feature was not used by the cards I initially used when
	  coding the
	  libfreefare, but is required for (at least some) Mifare DESFire
	  EV1 to work.
	  
	  IMPORTANT NOTE: The cards needing this block-number management to
	  work out
	  break-down when mifare_desfire_format_picc() is performed on
	  them. The ATR
	  change from 0x7577810280 to 0x757781028f and further
	  communication alway result
	  in a timeout. At the time of committing, the reason is still
	  unknown (bogus
	  cards, missed "Remarks" in the documentation, ...). Other
	  commands seems to
	  not expose additional problems.

2010-09-27 15:46  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-desfire-write-ndef.c: libfreefare: fix
	  mifare-desfire-write-ndef example, it now works with Nokia 6212
	  Classic. (Thanks to Roel)

2010-09-13 09:46  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-desfire-write-ndef.c: libfreefare: since r588,
	  mifare-desfire-write-ndef doesn't change anymore permanently
	  settings, executing it is now reversible.

2010-09-13 07:58  adiacre@il4p.fr

	* examples/mifare-desfire-write-ndef.c: libfreefare:
	  mifare-desfire-write-ndef, allow changing configuration and the
	  PICC master key.

2010-09-10 14:59  Romain Tartière <rtartiere@il4p.fr>

	* examples: libfreefare: Add mifare-desfire-write-ndef to the
	  svn:ignore list.

2010-09-10 14:58  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-write-ndef.c: libfreefare: Revert r565.
	  
	  r565 was misinterpreted as a bug while it's a feature. Since it
	  might be
	  inappropriate to do irreversible operations in an example, warn
	  the user about
	  it.

2010-09-07 14:35  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac: libfreefare: Bump version to 0.2.0.

2010-09-07 14:29  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: Fix
	  mifare-classic-write-ndef example when using a card with an
	  existing MAD.
	  
	  Also fix some perror() -> nfc_perror().

2010-09-07 13:38  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare: Remove debugging line
	  that should not have been committed in r535.

2010-09-07 09:05  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac: libfreefare: Add missing function check reported by
	  autoscan.

2010-09-06 09:28  Romuald Conty <rconty@il4p.fr>

	* configure.ac: libfreefare: bump libnfc needed version.

2010-09-04 11:06  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac, libfreefare/freefare_internal.h,
	  libfreefare/mifare_classic.c, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_aid.c, libfreefare/tlv.c: libfreefare:
	  Attempt to detect and use CoreFoundation's headers for endianness
	  conversions on Mac OS X.
	  
	  PR: Issue 21
	  Submitted by: MathewMcBride47

2010-09-04 10:47  Romain Tartière <rtartiere@il4p.fr>

	* configure.ac, examples/Makefile.am, test/Makefile.am:
	  libfreefare: Rework OpenSSL usage.
	  
	  - Lookup for crypto functions in libcrypto instead of libssl.
	  Some systems
	  (Mac OS) do not provide libssl, and the other have crypto
	  functions in
	  libcrypto but libssl is dynamically linked against libcrypto:
	  % ldd /usr/lib/libssl.so
	  /usr/lib/libssl.so:
	  libcrypto.so.6 => /lib/libcrypto.so.6 (0x800c00000)
	  libc.so.7 => /lib/libc.so.7 (0x800647000)
	  - Do not explicitly link against libssl (instead of libcrypto
	  BTW): the
	  autotools magic already does this at some point;
	  - Improve error message when headers cannot be found.

2010-09-04 10:25  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Explicitly enable auto
	  ISO14443-4 mode.
	  
	  We may be unable to locate Mifare DESFire otherwise.

2010-09-04 09:47  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/tlv.c: libfreefare: Add missing include <sys/types.h>
	  (required for some endianness magic).

2010-09-04 09:42  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h: libfreefare: Add some endianness
	  macro aliases for OpenBSD.

2010-09-04 09:16  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_aid.c: libfreefare: Complete external
	  document reference in comment.

2010-09-03 18:08  Romain Tartière <rtartiere@il4p.fr>

	* HACKING: libfreefare: Update the HACKING file and give some
	  indentation sugars.

2010-09-03 18:04  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-format.c,
	  examples/mifare-classic-write-ndef.c, libfreefare/freefare.c,
	  libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  libfreefare/mifare_desfire_key.c, libfreefare/tlv.c,
	  test/test_mifare_desfire.c: libfreefare: Reindent (2/2).
	  
	  Align cases with switch statements.
	  Ça y est! Le code est beau!

2010-09-03 18:01  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-format.c,
	  examples/mifare-classic-write-ndef.c,
	  examples/mifare-desfire-access.c,
	  examples/mifare-desfire-format.c, examples/mifare-desfire-info.c,
	  examples/mifare-desfire-write-ndef.c, libfreefare/freefare.c,
	  libfreefare/mifare_classic.c, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_aid.c,
	  libfreefare/mifare_desfire_authenticate.c, libfreefare/tlv.c,
	  test/mifare_classic_fixture.c, test/test_mifare_classic_mad.c,
	  test/test_mifare_desfire.c, test/test_tlv.c: Reindent (1/2).
	  
	  After trying to tweak gindent so that it does not mess-up my
	  ASCII art, give
	  and read the help of Vim to setup 'cinoptions' according to my
	  needs
	  (cino=t0(0). This changeset reindent some bits that where not
	  indented as they
	  should. A future commit will reindent the switch/case according
	  to my (bad)
	  taste now that I have setup cindent correctly on my system
	  (cino=t0(0:0).

2010-09-03 16:13  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_classic.c, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_ultralight.c: libfreefare: Update
	  nfc_initiator_transceive_bytes() vs.
	  nfc_initiator_transceive_dep_bytes().
	  
	  nfc_initiator_transceive_dep_bytes() was removed, and
	  nfc_initiator_transceive_bytes() is now configured to behave like
	  the one or
	  the other of the original functions. For details, see:
	  http://code.google.com/p/libnfc/source/detail?r=592

2010-09-03 15:56  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-write-ndef.c: libfreefare: Do not freeze
	  the card Master Key in mifare-desfire-write-ndef.
	  
	  Since it is irreversible, the card cannot be used for e.g.
	  running the
	  regression tests suite.

2010-09-03 15:54  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-info.c: libfreefare: Display Master Key
	  settings in mifare-desfire-info.

2010-09-03 15:51  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_error.c: libfreefare: Fix a function
	  name I forgot to change.

2010-09-03 14:36  adiacre@il4p.fr

	* examples/Makefile.am, examples/mifare-desfire-write-ndef.c:
	  libfreefare: add a new example "mifare-desfire-write-ndef" that
	  put a simple NDEF content on DESFire.

2010-09-03 13:18  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_aid.c: libfreefare: Minor tweaks.
	  
	  - Improve code lisibility;
	  - Add reference document link.

2010-09-03 12:51  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-format.c,
	  examples/mifare-classic-write-ndef.c,
	  examples/mifare-desfire-format.c: libfreefare: minor cosmetic
	  enhancements.

2010-09-03 11:26  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/Makefile.am, libfreefare/mifare_desfire_error.3:
	  libfreefare: Add some missing mifare_desfire_error.3 man page.

2010-09-03 11:24  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/Makefile.am, libfreefare/desfire_error.c,
	  libfreefare/freefare.h, libfreefare/mifare_desfire_error.c,
	  test/test_mifare_desfire.c: libfreefare: Rename
	  desfire_error_lookup() into mifare_desfire_error_lookup() for
	  consistency with the rest of the code.

2010-09-03 11:16  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/Makefile.am, libfreefare/mifare_desfire_aid.3:
	  libfreefare: Add some missing man pages.

2010-09-03 11:13  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire_aid.c: libfreefare: Free memory.

2010-09-03 10:55  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire_aid.c: libfreefare: Enhance Mifare
	  DESFire AID code.
	  
	  - Fix endianness problems;
	  - Enforce AID validity;
	  - Simplify code.

2010-09-03 10:54  Romain Tartière <rtartiere@il4p.fr>

	* test/Makefile.am, test/test_mifare_desfire_aid.c: libfreefare:
	  New unit test to check Mifare DESFire AIDs containing a Mifare
	  Classic AID.

2010-09-02 11:04  Romuald Conty <rconty@il4p.fr>

	* test/test_mifare_desfire.c: libfreefare: fix test affected by
	  r548.

2010-08-31 16:03  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-desfire-access.c, libfreefare/freefare.h,
	  libfreefare/mifare_desfire_aid.c: Dirty patch to be able to
	  create "real" MifareDESFareAID.

2010-08-31 14:48  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Attempt to fix Mifare
	  Classic support after r543.

2010-08-31 12:00  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: Indent after
	  last commit.

2010-08-31 12:00  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: Enhance the
	  mifare-classic-write-ndef example.
	  
	  - Only format the PICC if no MAD is present;
	  - Do not overwrite an existing MAD.

2010-08-31 11:29  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare: Check Mifare Classic
	  command return values.
	  
	  Many command return 1 byte, and my documentation does not tell
	  what it's
	  supposed to be. However, this byte is always 0 when running the
	  regression test
	  suite. It's likely to be an error code with value 0 being a
	  no-error code.
	  Assume this and check that the returned byte is always 0.

2010-08-31 11:13  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_desfire.c: libfreefare: Remove Snappers
	  workarounds: the bug is in the PN531 and has been fixed in r522.

2010-08-31 11:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Implement file
	  settings caching.
	  
	  For the regression test-suite test_mifare_desfire, it's a ~11%
	  performance
	  boost, with 206 cache hits out of 488 calls to
	  mifare_desfire_get_file_settings().

2010-08-31 10:20  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Remove an irrelevant
	  FIXME.
	  
	  The check is already done by the PICC and we may not have access
	  to the
	  required information to do the check from the library.
	  Additionally, the
	  mifare_desfire_change_key() would require different keys to
	  operate if we
	  detected an error, so no recovery of any kind is possible.

2010-08-31 10:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c, test/test_mifare_desfire.c:
	  libfreefare: Remove extra semi-columns at end of macro
	  definitions.

2010-08-31 10:06  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Enhance communication
	  settings detection failures detection.

2010-08-24 11:41  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Split-out freefare_tag_new()
	  from freefare_get_tags().
	  
	  Fixes issue 39.

2010-08-24 11:15  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Do not call directly
	  nfc_initiator_select_passive_target() but rather
	  nfc_initiator_list_passive_targets() in freefare_get_tags().

2010-08-24 10:51  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, examples/mifare-classic-write-ndef.c,
	  libfreefare/Makefile.am, libfreefare/freefare.h,
	  libfreefare/mad.3, libfreefare/mad.c,
	  libfreefare/mifare_application.3,
	  libfreefare/mifare_application.c, libfreefare/mifare_classic.c,
	  test/test_mifare_classic_mad.c: Rename
	  mad_application_(read|write) to mifare_application_(read|write).
	  
	  Fixes issue 40.

2010-08-04 16:18  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Enforce target type
	  identification with manufacturer code comparison.

2010-08-04 16:12  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Do not specify Mifare
	  DESFire target size in it's friendly name: all work the same way.

2010-08-04 16:11  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c, libfreefare/freefare_internal.h:
	  libfreefare: Enforce target type identification with ATS
	  comparison.

2010-08-04 12:51  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c, libfreefare/freefare_internal.h:
	  libfreefare: Don't check the ATQA to determine tags type, it
	  should not be used.

2010-08-04 12:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c: libfreefare: Don't keep unsupported tags
	  selected.
	  
	  Currently, when the libfreefare finds a NFC target, it checks
	  whether it's a
	  supported one looking at it's ATQA.
	  
	  If the target's ATQA is not in the supported ATQA list, the
	  target was not
	  deselected. While this is buggy, it allowed to detect 2 tags with
	  colliding
	  ATQA on a single NFC device and still have the ATQA of each tag
	  (on ATQA
	  collision, the ATQA is set to 0x0000 by the NFC chip, but as the
	  tag is not
	  deselected, it will have a second chance to tell it's ATQA when
	  it will be idle
	  again):
	  
	  computer PCD PICC1 PICC2
	  | | ATQA: 0x1234 0x6789
	  | | | |
	  |- InListTargets ->| | |
	  | |------ REQA ----->(===============)
	  | |<---- ATQA 1234 ------| | } Both reply
	  | |<---- ATQA 6789 --------------| } simultaneously
	  | | S |
	  | | // Collision detected PICC1 only is selected because
	  | | // only a single tag was wanted. It's ATQA is set
	  | | // to 0x0000.
	  |<-- ATQA 0x0000 --| S |
	  | // Unsuported ATQA, skipped S |
	  | | S |
	  | // DESELECT IS MISSING HERE! S |
	  | | S |
	  |- InListTargets ->| S |
	  | |------ REQA ----->(===============)
	  | |<---- ATQA 6789 --------------S // PICC1 won't reply
	  |<-- ATQA 0x6789 --| | S // it is still selected
	  | // Supported, deselect it | S
	  |--- InDeselect -->| | S
	  | |-------- HALT --------------->X
	  | | | X
	  |- InListTargets ->| | X
	  | |------ REQA ----->(===============)
	  | |<---- ATQA 1234 ------S X // PICC2 won't reply
	  |<-- ATQA 0x1234 --| S X // it is deselected
	  | // Supported, deselect it S X
	  |--- InDeselect -->| S X
	  | |-------- HALT ------->X X
	  | | X X
	  |--- InDeselect -->| X X
	  | |------ REQA ----->(===============)
	  | | X X // No reply
	  | | X X
	  
	  Tag timeline legend:
	  | - Target idle
	  S - Target selected
	  X - Target deselected
	  
	  Since PN53x devices can only known about 2 tags simultaneously,
	  presenting 3
	  targets to the NFC device caused an infinite loop.
	  
	  This commit prevents this infinite loop to occur, and will be
	  completed later
	  by another commit for not relying on the ATQA to determine
	  targets type.

2010-07-29 09:48  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_desfire.c: libfreefare: Use a lower-level
	  communication with Mifare DESFire targets.
	  
	  Instead of uting nfc_initiator_transceive_dep_bytes() to transmit
	  commands,
	  prepend an ISO-14443-4 header to it and send it using
	  nfc_initiator_transceive_bytes(). In case of WTX reply, handle
	  it, and then
	  extract relevant information from the data returned by the PICC.
	  
	  This prevents failure that happen with ISO-14443-4 compliant
	  targets when using
	  a PN531-based NFC-device, and allows using the libfreefare with
	  Mifare DESFire
	  targets on such devices.

2010-07-29 08:14  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_classic.c,
	  libfreefare/mifare_ultralight.c: libfreefare: Add debug
	  capabilities for Mifare Classic and Mifare UltraLight targets.

2010-07-29 07:58  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare_internal.h, libfreefare/mifare_desfire.c:
	  libfreefare: Move buffer macros to freefare_internal.h.
	  
	  While here, tweak <libutil.h> include.

2010-07-29 07:14  Romain Tartière <rtartiere@il4p.fr>

	* contrib/Makefile.am, contrib/libfreefare_zsnippets.vim:
	  libfreefare: Add my Vim snippets as contrib.

2010-07-29 06:31  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/Makefile.am: libfreefare: Always define -DWITH_DEBUG
	  if compiling WITH_DEBUG.

2010-07-29 06:25  Romain Tartière <rtartiere@il4p.fr>

	* Makefile.am, examples/Makefile.am, libfreefare/Makefile.am:
	  libfreefare: Fix $Id$ vcs keywords.
	  
	  - Add a new svn-keywords target to fix missing properties;
	  - Add a new svn-keywords-check target to locate files lacking
	  $Id$ statement.

2010-07-29 06:11  Romain Tartière <rtartiere@il4p.fr>

	* Makefile.am, configure.ac, contrib, contrib/Makefile.am,
	  contrib/libutil, contrib/libutil/Makefile.am,
	  contrib/libutil/hexdump.c, contrib/libutil/libutil.h,
	  libfreefare/Makefile.am, libfreefare/freefare_internal.h,
	  libfreefare/mifare_desfire.c: libfreefare: Reintroduce the
	  possibility to hexdump(3) PCD <=> PICC transmissions.
	  
	  Not a hack this time:
	  - Use the hexdump(3) function of the system if it exists;
	  - Build the subpart of FreeBSD's libutil if not (contrib);
	  - Do this only if configured --with-debug.
	  
	  The Mifare Classic / Ultralight code will be eventually changed
	  to also provide this functionality.

2010-07-29 05:58  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_classic_mad.c: libfreefare: Fix svn:keyword
	  (I'll commit something to handle this automagically in ~2
	  commits).

2010-07-28 10:23  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare:
	  mifare-classic-write-ndef now use newly introduced public keys
	  and AID.

2010-07-28 10:18  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare.h, libfreefare/mad.c: libfreefare: Add (and
	  export) NFC Forum AID.

2010-07-28 10:15  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare.h, libfreefare/mad.c: libfreefare: Add (and
	  export) AID administration codes (provided by MAD document -
	  AN10787)

2010-07-28 10:12  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare.h: libfreefare: Export NFC Forum public key
	  for MIFARE Classic.

2010-07-28 10:06  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare: Add NFC Forum public
	  key for MIFARE Classic.

2010-07-27 14:03  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: change sectors
	  keys THEN write application data.
	  
	  This should avoid failure in some advanced use cases and when the
	  example will be able to add user-provided data without data-loss.
	  
	  Suggested by: Romuald Conty <rconty@il4p.fr>

2010-07-27 13:54  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: Fix sector
	  counts.
	  
	  Submitted by: Romuald Conty <rconty@il4p.fr>
	  Pointy hat to: me

2010-07-27 13:37  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: Only search
	  keys of existing sectors.

2010-07-27 08:44  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-desfire-access.c,
	  examples/mifare-desfire-format.c, examples/mifare-desfire-info.c,
	  libfreefare/freefare.c, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, test/mifare_desfire_fixture.c:
	  libfreefare: Rename DESFIRE_4K to DESFIRE.
	  
	  The code can work with virtually any size of DESFire (since the
	  operating
	  system embedded in the card handle almost everything), so there
	  is no need for
	  us to distinguish cards of different sizes.

2010-07-27 08:35  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/Makefile.am, libfreefare/hexdump.c,
	  libfreefare/mifare_desfire.c, libutil.h: libfreefare: Remove the
	  FreeBSD hexdump(3) code.
	  
	  It was used for easing up development but is not needed anymore.

2010-07-27 08:17  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare: Rename MC_STORE to
	  MC_RESTORE.
	  
	  It's easy now that the macro is defined in the libfreefare's code
	  and not the libnfc's one.

2010-07-26 21:48  Romain Tartière <rtartiere@il4p.fr>

	* ., AUTHORS, HACKING, Makefile.am, README, configure.ac, examples,
	  examples/Makefile.am, examples/mifare-classic-format.c,
	  examples/mifare-classic-write-ndef.c,
	  examples/mifare-desfire-access.c,
	  examples/mifare-desfire-format.c, examples/mifare-desfire-info.c,
	  libfreefare/Makefile.am, libfreefare/desfire_error.c,
	  libfreefare/freefare.c, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/hexdump.c,
	  libfreefare/mad.c, libfreefare/mifare_classic.c,
	  libfreefare/mifare_desfire.3, libfreefare/mifare_desfire.c,
	  libfreefare/mifare_desfire_aid.c,
	  libfreefare/mifare_desfire_authenticate.c,
	  libfreefare/mifare_desfire_key.3,
	  libfreefare/mifare_desfire_key.c,
	  libfreefare/mifare_ultralight.3, libutil.h, test/Makefile.am,
	  test/mifare_classic_fixture.c, test/mifare_desfire_des.c,
	  test/mifare_desfire_fixture.c, test/mifare_desfire_fixture.h,
	  test/mifare_ultralight_fixture.c, test/test_mifare_application.c,
	  test/test_mifare_classic.c, test/test_mifare_desfire.c,
	  test/test_mifare_desfire_des.c, test/test_mifare_desfire_key.c:
	  libfreefare: Merge the freefare-desfire branch into trunk.

2010-07-26 20:27  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: Enhance the
	  mifare-classic-write-ndef example.
	  
	  - Use the new mifare_application_alloc() and
	  mad_application_write API;
	  - Deal with writing over multiple sectors with different keys.

2010-07-26 20:21  Romain Tartière <rtartiere@il4p.fr>

	* ., examples/mifare-classic-write-ndef.c: libfreefare: Merge r487
	  from the libfreefare-desfire branch.

2010-07-26 20:20  Romain Tartière <rtartiere@il4p.fr>

	* ., examples/mifare-classic-write-ndef.c: libfreefare: Merge r486
	  from the libfreefare-desfire branch.

2010-07-26 18:27  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_classic.3: Add missing APIs from the
	  documentation.

2010-07-26 14:12  Romain Tartière <rtartiere@il4p.fr>

	* ., libfreefare/freefare_internal.h, libfreefare/mifare_classic.c,
	  libfreefare/tlv.c: libfreefare: Merge r489 from the
	  libfreefare-desfire branch.

2010-07-21 11:41  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.c, libfreefare/mifare_classic.c,
	  libfreefare/mifare_ultralight.c: libfreefare: Update after libnfc
	  API change.

2010-07-20 07:47  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare.h, libfreefare/mad.c: libfreefare: constify
	  mad related functions when applicable.

2010-07-20 07:39  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mad.3: libfreefare: Minor mad man page fix.

2010-07-07 07:25  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-format.c: libfreefare: Add missing
	  config.h include in mifare-classic-format example. Fix Issue 34.

2010-07-03 10:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mad.3, libfreefare/mifare_application.3,
	  libfreefare/mifare_classic.3: libfreefare:
	  s/MifareSectorNumber/MifareClassicSectorNumber/ in man pages.

2010-07-03 10:06  Romain Tartière <rtartiere@il4p.fr>

	* TODO: libfreefare: Add TODO file.

2010-07-03 10:04  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_application.3: libfreefare: Add another
	  implementation node.

2010-07-03 10:04  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/Makefile.am, libfreefare/freefare.h,
	  libfreefare/mad.3, libfreefare/mad.c,
	  test/test_mifare_classic_mad.c: libfreefare: New API functions
	  mad_application_read(), mad_application_write().

2010-07-03 09:14  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-format.c: libfreefare: Allow
	  mifare-classic-format to be run non-interactively.

2010-07-03 09:09  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-format.c: libfreefare: Add a fast-format
	  feature in the mifare-classic-format utility to only erase MAD.

2010-07-03 06:31  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-format.c,
	  examples/mifare-classic-write-ndef.c, libfreefare/freefare.h,
	  libfreefare/mad.c, libfreefare/mifare_application.c,
	  libfreefare/mifare_classic.c, test/test_mifare_application.c:
	  libfreefare: Rename MifareSectorNumber to
	  MifareClassicSectorNumber.

2010-07-03 06:28  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_application.c: libfreefare: Add missing
	  parentheses.

2010-07-03 06:24  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/mifare_application.c: libfreefare: Don't assume a
	  Mifare Classic Sector Number will always fit in a byte (currently
	  it's a uint8_t but it exposes some problems).

2010-07-03 06:09  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.h: libfreefare: Sync
	  mifare_classic_format_sector() prototype in freefare.h with the
	  code.

2010-07-01 23:19  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, examples/mifare-classic-format.c, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/mifare_classic.3,
	  libfreefare/mifare_classic.c, test/test_mifare_classic.c,
	  test/test_mifare_classic_mad.c,
	  test/test_mifare_classic_sector_boundaries.c: libfreefare:
	  Refactoring Blocks vs. Sectors.
	  - mifare_classic_format_sector() now wants a sector instead of a
	  block (the name was really disturbing);
	  - New public API functions for Block <=> Sector conversions.

2010-07-01 21:57  Romain Tartière <rtartiere@il4p.fr>

	* test/Makefile.am, test/test_mifare_application.c,
	  test/test_mifare_classic_application.c: libfreefare: Rename the
	  test_mifare_classic_application unit test to
	  test_mifare_application.

2010-07-01 21:44  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/freefare.h, libfreefare/mad.c,
	  libfreefare/mifare_application.c,
	  test/test_mifare_classic_application.c: libfreefare: Fix MAD
	  manipulation for Mifare Classic 4K.
	  - Allocate large blocks on Mifare Classic 4K in unit tests;
	  - Constraints sector number in mad_set_aid();
	  - Fix location of AID storage in mad_set_aid() (wrong variable
	  name and offset, ECOPYPASTETOOFAST);
	  - New API function mad_sector_reserved();
	  - Use mad_sector_reserved() to avoid trying to use reserved
	  sectors.

2010-07-01 17:05  Romain Tartière <rtartiere@il4p.fr>

	* NEWS, libfreefare/mifare_application.3,
	  libfreefare/mifare_application.c,
	  test/test_mifare_classic_application.c: libfreefare: Make
	  mifare_application_alloc() accept size in bytes.
	  
	  Fixes issue 31.

2010-07-01 14:10  Romain Tartière <rtartiere@il4p.fr>

	* test/Makefile.am, test/test_mifare_classic.c,
	  test/test_mifare_classic_mad.c: libfreefare: Add unit tests for
	  mad_read() and mad_write().

2010-07-01 14:08  Romain Tartière <rtartiere@il4p.fr>

	* libfreefare/freefare.h, libfreefare/mad.c: libfreefare: Make the
	  MAD read public key public (Rename it to insist on it's public
	  nature).

2010-07-01 13:25  Romain Tartière <rtartiere@il4p.fr>

	* examples/mifare-classic-format.c: libfreefare: s/blocks/sectors/

2010-07-01 12:32  Romain Tartière <rtartiere@il4p.fr>

	* HACKING, libfreefare/freefare.3: libfreefare: Document the
	  mifare_tag_type enum.

2010-07-01 11:00  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_classic.c: libfreefare: Remove clueless omitted
	  test.

2010-07-01 10:57  Romain Tartière <rtartiere@il4p.fr>

	* test/test_mifare_classic.c, test/test_mifare_ultralight.c:
	  libfreefare: Complete unit tests coverage of freefare.c.
	  
	  The freefare_get_tag_friendly_name() function was not tested.
	  Call it from both supported cards unit tests suites.

2010-07-01 10:51  Romain Tartière <rtartiere@il4p.fr>

	* test/Makefile.am, test/test_mifare_classic.c,
	  test/test_mifare_classic_sector_boundaries.c: libfreefare: Move
	  test_mifare_classic_sector_boundaries() in it's own file.
	  
	  While here, sort out lines in test/Makefile.am.

2010-07-01 10:44  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Fix function name when
	  reporting errors.

2010-06-30 07:58  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mifare_application.3: libfreefare: Fix
	  mifare_application_alloc documentation: function takes "size"
	  param in sectors unit.

2010-06-29 15:16  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare: factorize some
	  code in examples/mifare-classic-write-ndef

2010-06-29 14:45  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare: add MIFARE Classic 4K
	  documentation reference.

2010-06-29 08:26  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-format.c: libfreefare: minor enhancement
	  in mifare-classic-format progress display with 4k.

2010-06-28 19:13  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-write-ndef.c: libfreefare:
	  (mifare-classic-write-ndef) fix authentication block number with
	  4k.

2010-06-28 13:32  Romuald Conty <rconty@il4p.fr>

	* examples: libfreefare: set svn:ignore for examples binaries.

2010-06-28 13:23  Romuald Conty <rconty@il4p.fr>

	* examples/mifare-classic-format.c: libfreefare: enhance progress
	  display with MIFARE Classic 1K.

2010-06-26 13:48  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c,
	  examples/mifare-classic-write-ndef.c, libfreefare/freefare.c,
	  libfreefare/mifare_application.c, libfreefare/mifare_classic.c:
	  (libfreefare) Silent down gcc44 -Wextra warnings.

2010-06-26 13:45  Romain Tartière <romain@blogreen.org>

	* test/run-test.sh: (libfreefare) Workaround a FreeBSD-specific bug
	  in cutter.

2010-06-26 11:57  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c: (libfreefare) Display format
	  operation progress.

2010-06-26 11:56  Romain Tartière <romain@blogreen.org>

	* libfreefare/tlv.c: (libfreefare) Fix endian.h inclusion.

2010-06-25 00:30  Romain Tartière <romain@blogreen.org>

	* libfreefare/tlv.c: Fix typo in comment. I may need to buy a few
	  more fingers to count on.

2010-06-25 00:27  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.h, libfreefare/tlv.c, test/test_tlv.c:
	  Various TLV enhancements:
	  - New API function: tlv_append();
	  - Added unit tests for tlv_append();
	  - New internal functions: tlv_record_length(), tlv_next(),
	  tlv_sequence_length();
	  - Rework tlv_decode() to use new internal functions.

2010-06-24 00:19  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-write-ndef.c: Force disconnect to avoid
	  failure when the same key is usable as key A and key B.

2010-06-24 00:06  Romain Tartière <romain@blogreen.org>

	* libfreefare/mad.c: Fix mad_write().

2010-06-23 23:21  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-write-ndef.c, libfreefare/tlv.c,
	  test/test_tlv.c: Fix TLV terminator. 0xFE is part of TLV, not
	  NDEF.

2010-06-23 02:05  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-write-ndef.c: Actually write some NDEF
	  data in the mifare-classic-write-ndef example.

2010-06-23 02:03  Romain Tartière <romain@blogreen.org>

	* libfreefare/Makefile.am, libfreefare/freefare.h,
	  libfreefare/tlv.3, libfreefare/tlv.c, test/Makefile.am,
	  test/test_tlv.c: Add support for TLV streams.
	  - New API functions: tlv_encode(), tlv_decode();
	  - Documentation (man page);
	  - Unit tests.

2010-06-23 00:36  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_application.3: Add missing section line in man
	  page.

2010-06-22 22:50  Romain Tartière <romain@blogreen.org>

	* libfreefare/mad.3: Fix documentation: a Mad is freed using
	  mad_free() not free(3).
	  
	  Actually, mad_free() only calls free(3) but for the sake of
	  consistency, document the proper interface.

2010-06-22 22:44  Romain Tartière <romain@blogreen.org>

	* examples/Makefile.am, examples/mifare-classic-write-ndef.c: Add a
	  new example to write a MAD on MIFARE Classic cards.
	  
	  It is a WIP example that should not stay long as an example and
	  will be moved in the regression test-suite sooner or later.

2010-06-22 21:57  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: Also fix the code after changeset
	  r360.
	  
	  Pointy hat to: me

2010-06-22 21:53  Romain Tartière <romain@blogreen.org>

	* libfreefare/mad.3: Complete documentation for mad_new().

2010-06-22 21:52  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: Fix comment: c(321)=001 -> Key B
	  can be written using Key B.

2010-06-22 17:11  Romain Tartière <romain@blogreen.org>

	* libfreefare/mad.c: Fix wrong trailer block number for writing MAD
	  v2.

2010-06-22 14:01  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: Copy MIFARE Classic commands codes
	  from the old libnfc source to the libfreefare's one.

2010-04-26 11:09  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.3: libfreefare: Update documentation.
	  
	  Add a note about freefare_get_tags() invalidating previously
	  found targets.

2010-04-26 10:53  Romain Tartière <romain@blogreen.org>

	* NEWS, libfreefare/freefare.3: libfreefare: Document the new
	  freefare_free_tag() function.
	  
	  Fixes issue 22.

2010-04-26 10:34  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.c, libfreefare/freefare.h: libfreefare:
	  Remove the freefare_duplicate_tag() function.
	  
	  Update issue 22
	  Remove the freefare_duplicate_tag() function.

2010-04-26 09:11  Romain Tartière <romain@blogreen.org>

	* test/mifare_classic_fixture.c, test/mifare_ultralight_fixture.c:
	  libfreefare: Don't use deprecated cutter API.

2010-04-20 15:17  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare.c, libfreefare/freefare.h: libfreefare: add
	  freefare_free_tag() to free only one tag and add
	  freefare_duplicate_tag() in order to copy a tag struct.

2010-04-13 14:00  Romain Tartière <romain@blogreen.org>

	* HACKING: libfreefare: Add a few hints about where to do what.

2010-04-08 13:02  Romain Tartière <romain@blogreen.org>

	* Makefile.am, configure.ac: libfreefare: Add HACKING file to the
	  autotooled tarball. Change version to 0.1.0.

2010-04-08 12:55  Romain Tartière <romain@blogreen.org>

	* HACKING: libfreefare: Add HACKING file.

2010-04-08 12:23  Romain Tartière <romain@blogreen.org>

	* README: libfreefare: Fill-in the README file.

2010-04-08 12:10  Romain Tartière <romain@blogreen.org>

	* test/mifare_classic_fixture.c, test/mifare_ultralight_fixture.c:
	  libfreefare: Use cut_omit() in tests setup() fixtures (requires
	  cutter>=1.1.2).

2010-04-08 12:01  Romain Tartière <romain@blogreen.org>

	* configure.ac: libfreefare: Detect cutter version. We will depend
	  on 1.1.2 soon actually.

2010-04-07 15:36  Romain Tartière <romain@blogreen.org>

	* AUTHORS, Makefile.am: Add infrastructure for generating the
	  ChangeLog.

2010-04-07 14:19  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare_internal.h: libfreefare: next try to build
	  under OpenBSD.

2010-04-07 14:06  Romuald Conty <rconty@il4p.fr>

	* configure.ac, libfreefare/mifare_classic.c: libfreefare: attempt
	  to build under OpenBSD.

2010-04-07 10:23  Romuald Conty <rconty@il4p.fr>

	* configure.ac: libfreefare: check functions letoh32 and htole32.

2010-04-07 10:22  Romuald Conty <rconty@il4p.fr>

	* configure.ac: libfreefare needs libnfc >= 1.3.4 so configure will
	  now detect it.

2010-04-01 12:04  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Replace UTF-8
	  what-seems-to-be-an "em dash" with a basic ASCII dash: ANSI C
	  says source code should be written in ASCII.

2010-03-31 22:46  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Add missing htole32()
	  call in mifare_classic_init_value(). Fix Mifare Classic support
	  on big-endian machines.

2010-03-30 16:24  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c, libfreefare/freefare.h,
	  libfreefare/mifare_classic.3, libfreefare/mifare_classic.c,
	  libfreefare/mifare_ultralight.3, libfreefare/mifare_ultralight.c,
	  test/test_mifare_classic.c, test/test_mifare_ultralight.c:
	  libfreefare: Remove deprecated API mifare_ultralight_get_uid(),
	  mifare_classic_get_uid().

2010-03-30 16:18  Romain Tartière <romain@blogreen.org>

	* libfreefare/Makefile.am, libfreefare/freefare.3,
	  libfreefare/freefare.c, libfreefare/freefare.h,
	  libfreefare/mifare_classic.c, libfreefare/mifare_ultralight.c,
	  test/test_mifare_classic.c, test/test_mifare_ultralight.c:
	  libfreefare: New API function freefare_get_tag_uid().
	  - Deprecates mifare_classic_get_uid() and
	  mifare_ultralight_get_uid().

2010-03-30 16:08  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_ultralight.c: libfreefare: Fix weird UIDs for
	  Mifare UltraLight (requires libnfc at r328)

2010-03-30 13:56  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_ultralight.c: libfreefare: Do not require a
	  Mifare UltraLight TAG to be connected to get it's UID.
	  
	  Submitted by: rosek86@gmail.com

2010-03-30 12:54  Romain Tartière <romain@blogreen.org>

	* libfreefare/Makefile.am, libfreefare/freefare.3,
	  libfreefare/mad.3, libfreefare/mifare_application.3,
	  libfreefare/mifare_classic.3, libfreefare/mifare_ultralight.3:
	  libfreefare: Add man pages.

2010-03-19 09:00  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.h, libfreefare/freefare_internal.h,
	  libfreefare/mifare_classic.c: libfreefare: Add access bit macros
	  to ease-up writing code using the library.

2010-03-18 21:03  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare_internal.h, libfreefare/mad.c,
	  test/test_mad.c: libfreefare: Fix MAD CRC algorithm.
	  
	  The CRC algorithm is not a standard CRC algorithm so rename it to
	  nxp_crc() and adjust all related code.

2010-03-02 19:01  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.h: libfreefare: Style.

2010-03-01 14:19  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.c, libfreefare/freefare_internal.h:
	  libfreefare: Instead of copying n fields, setup a pointer to the
	  relevant supported_tag information in mifare_tag structures.

2010-03-01 14:04  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c, libfreefare/freefare.c,
	  libfreefare/freefare.h, libfreefare/freefare_internal.h:
	  libfreefare: Add support for friendly tag names.

2010-02-25 18:02  Romain Tartière <romain@blogreen.org>

	* configure.ac, libfreefare/freefare_internal.h: libfreefare:
	  Rework byteswap.h inclusion.
	  
	  This header is not available on e.g. FreeBSD so detect it's
	  presence in configure.ac and only include it if appropriate.
	  Then, if byte order manipulation macros are not defined (old
	  glibc like the one provided by Debian GNU/Linux) define them.

2010-02-24 21:52  Romuald Conty <rconty@il4p.fr>

	* libfreefare/freefare_internal.h: libfreefare: define le32toh and
	  htole32, this allow to compile against libc that doesn't provide
	  these functions (like Debian Lenny)

2010-02-23 14:22  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Fix the
	  test_mifare_classic_format unit test.

2010-02-23 12:05  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Change a secret ninja
	  guru one-line expression into a function and document what it is
	  supposed to do and how it does it.

2010-02-23 02:12  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/mifare_classic.c,
	  test/test_mifare_classic.c: libfreefare: Add support for MIFARE
	  Classic 4K.
	  
	  - New mifare_classic_first_sector_block(),
	  mifare_classic_last_sector_block() functions to ease detection of
	  sectors boundaries;
	  - New unit tests for mifare_classic_first_sector_block() and
	  mifare_classic_last_sector_block();
	  - Start to update the API for consistently using blocks and not
	  mixing blocks and sectors with mifare_classic_*() functions;
	  - Update the mifare-classic-format(1) example to handle MIFARE
	  Classic 1k and 4k.
	  
	  Many thanks to Johann Dantant from SpringCard for giving me
	  MIFARE Classic 4k cards.

2010-02-23 02:03  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.c: libfreefare: Fix wrong MIFARE Classic 4K
	  SAK.

2010-02-23 02:00  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Add missing
	  block_number <- block that prevented full cache hits.

2010-02-22 17:30  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Add a unit test for
	  mifare_classic_get_uid().

2010-02-22 12:25  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.c, libfreefare/freefare_internal.h,
	  libfreefare/mifare_classic.c, libfreefare/mifare_ultralight.c:
	  libfreefare: Rework data structures allocations / frees.
	  
	  - New mifare_*_tag_new() functions for allocating and
	  initialising memory for a given MIFARE tag;
	  - Rename mifare_*_free_tag() to mifare_*_tag_free() for
	  consistent names with mifare_*_tag_new() functions.

2010-02-22 12:05  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_ultralight.c: libfreefare: Remove unneeded
	  header.

2010-02-19 14:50  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c, libfreefare/Makefile.am,
	  libfreefare/freefare.c, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/mad.c,
	  libfreefare/mifare_classic.c, libfreefare/mifare_ultralight.c,
	  test/mifare_classic_fixture.c, test/mifare_classic_fixture.h,
	  test/mifare_ultralight_fixture.c,
	  test/mifare_ultralight_fixture.h, test/test_mifare_ultralight.c:
	  libfreefare: Abstract tag manipulation functions.
	  
	  - Factorize Mifare*Tag as MifareTag;
	  - Factorize mifare_*_get_tags() / mifare_*_free_tags() as
	  freefare_get_tags() and freefare_free_tags();
	  - Add a new freefare_get_tag_type() function to get a tag type;
	  - Update regression test suite;
	  - Update example.
	  
	  While this is a major change that basically change all the API,
	  programs using libfreefare should be easily modified by replacing
	  any Mifare*Tag variable by a generic MifareTag one, adding a few
	  lines of code to check the target's type using
	  freefare_get_tag_type(), and changing any call to
	  mifare_*_get_tags() / mifare_*_free_tags() by the generic
	  freefare_get_tags() and freefare_free_tags() functions.

2010-02-19 14:40  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Do not make regression
	  tests fail: spamming my shell is enouth to reminf me to fix this.

2010-02-19 10:43  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c,
	  libfreefare/freefare_internal.h, test/mifare_classic_fixture.c,
	  test/mifare_classic_fixture.h, test/test_mad.c,
	  test/test_mifare_classic.c,
	  test/test_mifare_classic_application.c,
	  test/test_mifare_classic_create_trailer_block.c: libfreefare:
	  Update files headers and Ids.

2010-02-18 18:32  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_ultralight.c: libfreefare: Fix MIFARE
	  UltraLight UID length.
	  
	  Okay, either I lost some code somewhere, or I am really mad _AND_
	  fu**ing good at writing C code 'cause I am pretty sure I already
	  fixed that at the very beginning of the UltraLight tags support
	  and only after wrote all these test I don't have to modify so
	  they pass.

2010-02-18 18:13  Romain Tartière <romain@blogreen.org>

	* test/mifare_ultralight_fixture.c, test/test_mifare_ultralight.c:
	  libfreefare: Fix MIFARE UltraLight related code (C99 compliance).

2010-02-18 18:12  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Fix MIFARE Classic unit
	  tests default key.
	  
	  According to the NXP documentation, default keys are
	  0xffffffffffff, not 0xa0a1a2a3a4a5 nor 0xd3f7d3f7d3f7.

2010-02-18 18:09  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: fix the
	  mifare_classic_transfer() function.

2010-02-18 17:14  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Mark
	  test_mifare_classic_get_trailer_permission() as pending.
	  
	  This test requires a valid MAD to be present on the MIFARE card
	  which is not a requirement for testing MIFARE Classic tags but
	  MAD.

2010-02-18 17:07  Romain Tartière <romain@blogreen.org>

	* test/test_mifare_classic.c: libfreefare: Fix default permissions.

2010-02-18 16:45  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: ilibfreefare: The transfer
	  operation actually returns something.

2010-02-11 11:29  Romain Tartière <romain@blogreen.org>

	* test/mifare_classic_fixture.c, test/test_mad.c,
	  test/test_mifare_classic.c,
	  test/test_mifare_classic_application.c,
	  test/test_mifare_classic_create_trailer_block.c: Honor 'ISO C99
	  requires rest arguments to be used'.

2010-01-22 16:06  Romain Tartière <romain@blogreen.org>

	* examples/mifare-classic-format.c, test/mifare_classic_fixture.c,
	  test/test_mifare_classic.c: libfreefare: Fix a brunch of
	  warnings.

2010-01-19 23:15  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Use the new
	  ASSERT_INACTIVE macro in mifare_classic.c.

2010-01-19 23:14  Romain Tartière <romain@blogreen.org>

	* libfreefare/Makefile.am, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/mifare_ultralight.c,
	  test/Makefile.am, test/mifare_ultralight_fixture.c,
	  test/mifare_ultralight_fixture.h, test/test_mifare_ultralight.c:
	  libfreefare: Add support for MIFARE UltraLight Tags.
	  
	  Many thanks to Johann Dantant from SpringCard for giving me
	  UltraLight cards.
	  
	  While here, fix a few other problems in the autostuff.

2010-01-19 23:10  Romain Tartière <romain@blogreen.org>

	* examples/Makefile.am: libfreefare: Fix wrong variable name.

2010-01-13 13:53  Romain Tartière <romain@blogreen.org>

	* configure.ac: libfreefare: Set _XOPEN_SOURCE to 600 for silencing
	  gcc on GNU/Linux.

2010-01-12 15:38  Romain Tartière <romain@blogreen.org>

	* test/Makefile.am, test/mifare_classic_fixture.c: libfreefare: Fix
	  regression tests build on FreeBSD.
	  
	  While here, enhance error message when no MIFARE Classic tag can
	  be found on the NFC device when running test_mifare_classic.la
	  tests.

2010-01-11 20:25  Romuald Conty <rconty@il4p.fr>

	* Makefile.am, test/Makefile.am: libfreefare: Fix build when cutter
	  is not available. (make distcheck ok)

2010-01-11 20:14  Romain Tartière <romain@blogreen.org>

	* ., Makefile.am, configure.ac, libfreefare, test, test/Makefile,
	  test/Makefile.am, test/main.c, test/mifare_classic_fixture.c,
	  test/mifare_classic_fixture.h, test/mifare_classic_test.c,
	  test/null_value_block.uu, test/run-test.sh,
	  test/sample_value_block.uu, test/test.h, test/test_access_bits.c,
	  test/test_authenticate.c, test/test_create_trailer_block.c,
	  test/test_format.c, test/test_mad.c,
	  test/test_mifare_application.c, test/test_mifare_classic.c,
	  test/test_mifare_classic_application.c,
	  test/test_mifare_classic_create_trailer_block.c,
	  test/test_read_sector_0.c, test/test_read_sector_0.uu,
	  test/test_value_block.c: libfreefare: Rework unit tests using
	  cutter.

2010-01-10 14:24  Romain Tartière <romain@blogreen.org>

	* examples/Makefile.am, examples/mifare-classic-format.c:
	  libfreefare: Update the mifare-classic-format example.

2010-01-09 02:55  Romain Tartière <romain@blogreen.org>

	* libfreefare/mad.c: libfreefare: Fix invalid memory access in CRC8
	  computation functions.

2010-01-09 01:37  Romain Tartière <romain@blogreen.org>

	* libfreefare/mifare_classic.c: libfreefare: Handle the special
	  case of sector #0 when formatting (sector is read-only).

2010-01-09 01:36  Romain Tartière <romain@blogreen.org>

	* test/test_format.c: libfreefare: The mifare_classic_format_sector
	  prototype was changed on changeset 88. Update unit test
	  accordingly.

2010-01-08 22:44  Romain Tartière <romain@blogreen.org>

	* libfreefare/freefare.h, test/test_mad.c: libfreefare: Fix MadAid
	  field orders (transfer bytes order is big endian).

2010-01-08 21:00  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare:
	  mifare_classic_get_tags() now return NULL when on failure and a
	  one-entry array set to NULL when no tag is available (tags[0] ==
	  NULL).

2010-01-08 20:58  Romuald Conty <rconty@il4p.fr>

	* Makefile.am, libfreefare/Makefile.am: libfreefare: move
	  ACLOCAL_AMFLAGS to top Makefile.am

2010-01-08 16:34  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mifare_classic.c: libfreefare: fix
	  mifare_classic_get_uid().

2010-01-08 16:17  Romuald Conty <rconty@il4p.fr>

	* libfreefare/mad.c: libfreefare: fix include header in mad.c

2010-01-08 13:40  Romain Tartière <romain@blogreen.org>

	* configure.ac, examples, examples/Makefile.am,
	  examples/mifare-classic-format.c: libfreefare: Unbreak example
	  and add autotool stuff to help building.

2010-01-08 11:51  Romain Tartière <romain@blogreen.org>

	* Makefile.am: libfreefare: Add Makefile.am forgotten in the
	  previous commit.

2010-01-08 11:46  Romain Tartière <romain@blogreen.org>

	* ., Makefile.am, configure.ac, freefare.h, freefare_internal.h,
	  libfreefare, libfreefare/Makefile.am, libfreefare/freefare.h,
	  libfreefare/freefare_internal.h, libfreefare/mad.c,
	  libfreefare/mifare_application.c, libfreefare/mifare_classic.c,
	  mad.c, mifare_application.c, mifare_classic.c, test/Makefile,
	  test/test_mad.c: libfreefare: Split out autojunk and actual code
	  files.

2010-01-08 11:24  Romain Tartière <romain@blogreen.org>

	* Makefile.am, freefare_internal.h, mad.c, test/test_mad.c:
	  libfreefare: Add MAD CRC support.

2010-01-08 09:40  Romain Tartière <romain@blogreen.org>

	* freefare.h, mifare_application.c: libfreefare: Fix Id
	  svn:keywords (ECOPYPASTETOOFAST).

2010-01-08 08:29  Romain Tartière <romain@blogreen.org>

	* mifare_classic.c: libfreefare: Add error checking to
	  mifare_classic_connect(), mifare_classic_disconnect().
	  
	  Do not assume nfc_initiator_select_tag() and
	  nfc_initiator_deselect_tag() will not return an error if the
	  provided tag is supposed to be ready for the operation (it might
	  have move out of the field), and let the error propagate through
	  libfreefare to the application calling the functions.

2010-01-06 23:44  Romuald Conty <rconty@il4p.fr>

	* examples, examples/mifare-classic-format.c: libfreefare: add an
	  example draft mifare-classic-format, a tool which can be usefull
	  to debug :)

2010-01-06 23:42  Romuald Conty <rconty@il4p.fr>

	* freefare.h, mifare_classic.c: libfreefare: add an accessor to UID
	  contained in MifareClassicTag

2010-01-06 23:40  Romuald Conty <rconty@il4p.fr>

	* freefare.h: libfreefare: add C++ compatibility.

2010-01-03 19:53  Romain Tartière <romain@blogreen.org>

	* freefare.h: libfreefare: add freefare.h forgotten in previous
	  commit.

2009-12-26 18:16  Romain Tartière <romain@blogreen.org>

	* Makefile.am, mad.c, mad.h, mifare_application.c,
	  mifare_application.h, mifare_classic.c, mifare_classic.h,
	  mifare_common.h, test/test.h, test/test_authenticate.c,
	  test/test_create_trailer_block.c, test/test_format.c,
	  test/test_read_sector_0.c: libfreefare: merge all includes into a
	  single freefare.h header.
	  
	  libmad already has a mad.h file libfreefare would conflict with.

2009-12-26 03:37  Romuald Conty <rconty@il4p.fr>

	* mifare_classic.c: libfreefare: Tag is no more active if
	  authentication failed.

2009-12-23 15:26  Romuald Conty <rconty@il4p.fr>

	* Makefile.am, configure.ac, mad.h, mifare_classic.c,
	  mifare_classic.h, mifare_common.h: libfreefare: put
	  MifareSectorNumber type in a new mifare_common.h header.
	  API changed: mifare_classic_format_sector() now takes a
	  MifareSectorNumber in argument.

2009-12-22 20:48  Romain Tartière <romain@blogreen.org>

	* configure.ac, mad.c, mifare_application.c, mifare_classic.c: Fix
	  autotools on FreeBSD.
	  
	  Endianness fun is not provided by the same header file on
	  GNU/Linux (endian.h) and FreeBSD (sys/endian.h). Add some magic
	  for the autotools to detect the correct header file. While here,
	  add AC_C_INLINE: it's reported as missing by autoscan(1).

2009-12-21 13:58  Romain Tartière <romain@blogreen.org>

	* test/test_access_bits.c, test/test_authenticate.c,
	  test/test_create_trailer_block.c, test/test_format.c,
	  test/test_mad.c, test/test_read_sector_0.c,
	  test/test_value_block.c: libfreefare: Enforce unit tests name
	  consistency.

2009-12-21 13:54  Romain Tartière <romain@blogreen.org>

	* Makefile.am, mifare_application.c, mifare_application.h,
	  test/Makefile, test/test.h, test/test_mifare_application.c:
	  libfreefare: Introduce MAD application management functions.

2009-12-21 13:31  Romain Tartière <romain@blogreen.org>

	* mad.c: libfreefare: Fix mad_get_aid(): sector 0x10 is reserved
	  and cannot be used.

2009-12-21 03:02  Romain Tartière <romain@blogreen.org>

	* mad.c, mad.h, test/test_mad.c: libfreefare: Make MAD Application
	  Identifiers (AID) structure public as MadAid.
	  - Changed mad_get_aid() and mad_set_aid() ABI;
	  - Update unit test;

2009-12-21 02:35  Romain Tartière <romain@blogreen.org>

	* Makefile.am, mad.c, mad.h, mifare_classic.c: libfreefare:
	  - Rename MifareSector to MifareSectorNumber;
	  - Fix includes (use '<>' instead of '""');
	  - Add -I. to cc arguments.

2009-12-21 00:40  Romain Tartière <romain@blogreen.org>

	* Makefile.am, mad.c, mad.h, mifare_application_directory.c,
	  mifare_application_directory.h, test/Makefile, test/test.h:
	  libfreefare: Rename mifare_application_directory.[ch] to
	  mad.[ch].

2009-12-21 00:02  Romain Tartière <romain@blogreen.org>

	* Makefile.am, mifare_application_directory.c,
	  mifare_application_directory.h, test/Makefile, test/test.h,
	  test/test_mad.c: libfreefare: Add MIFARE Application Directory
	  (MAD) version 1 & 2 support (modulo CRC).

2009-12-20 23:42  Romain Tartière <romain@blogreen.org>

	* test/mifare_classic_test.c: libfreefare: Don't crash when no
	  MIFARE target is present when running the regression tests suite.

2009-12-19 22:59  Romain Tartière <romain@blogreen.org>

	* test/test_create_trailer_block.c: libfreefare: Add forgotten
	  regression test for mifare_classic_trailer_block().

2009-12-19 22:55  Romain Tartière <romain@blogreen.org>

	* configure.ac, mifare_classic.c, mifare_classic.h: libfreefare:
	  Mark functions parameters as `const' when applicable.

2009-12-19 06:10  Romain Tartière <romain@blogreen.org>

	* mifare_classic.c, mifare_classic.h, test/Makefile: libfreefare:
	  New API function: mifare_classic_trailer_block().

2009-12-19 02:06  Romain Tartière <romain@blogreen.org>

	* test, test/Makefile, test/main.c, test/mifare_classic_test.c,
	  test/null_value_block.uu, test/sample_value_block.uu,
	  test/test.h, test/test_access_bits.c, test/test_authenticate.c,
	  test/test_format.c, test/test_read_sector_0.c,
	  test/test_read_sector_0.uu, test/test_value_block.c: libfreefare:
	  Add regression test suite.

2009-12-19 02:01  Romain Tartière <romain@blogreen.org>

	* mifare_classic.c, mifare_classic.h: libfreefare: New API
	  function: mifare_classic_format_sector().

2009-12-18 21:31  Romain Tartière <romain@blogreen.org>

	* ., Makefile.am, configure.ac, libfreefare.pc.in: libfreefare:
	  Install a libfreefare.pc pkg-config module.

2009-12-18 21:13  Romain Tartière <romain@blogreen.org>

	* mifare_classic.c: libfreefare: Add pointers to the implementation
	  sources.

2009-12-18 20:32  Romain Tartière <romain@blogreen.org>

	* ., AUTHORS, COPYING, ChangeLog, Makefile.am, NEWS, README,
	  configure.ac, m4, mifare_classic.c, mifare_classic.h: Import
	  libfreefare into trunk.

